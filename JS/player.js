class player extends partisan{
    constructor(layer,x,y){
        super(layer,x,y,0,30,90)
        this.anim={eye:0,sandal:1,sleeve:1,kimono:1,decoration:1,direction:25}
        this.hair=[{spin:[-90,20,0],height:6}]
        this.spin={eye:[-15,15]}
        this.movement={speed:0.4,jump:8}

        this.size=3
    }
    display(){
        if(this.fade>0&&this.size>0){
            this.layer.translate(this.position.x,this.position.y+45)
            this.layer.scale(this.size)
            /*if(this.anim.sandal>0){
                this.layer.translate(-7.9,-0.75)
                this.layer.rotate(-atan2(-3.95,30))
                this.layer.image(graphics.minor[0],-4*this.anim.sandal*this.fade,-4*this.anim.sandal*this.fade,8*this.anim.sandal*this.fade,8*this.anim.sandal*this.fade)
                this.layer.rotate(atan2(-3.95,30))
                this.layer.translate(15.8,0)
                this.layer.rotate(atan2(-3.95,30))
                this.layer.image(graphics.minor[0],-4*this.anim.sandal*this.fade,-4*this.anim.sandal*this.fade,8*this.anim.sandal*this.fade,8*this.anim.sandal*this.fade)
                this.layer.rotate(-atan2(-3.95,30))
                this.layer.translate(-7.9,0.75)
            }
            this.layer.noStroke()
            this.layer.fill(243,154,163,this.fade)
            this.layer.triangle(0,-75,18,-75,9,-58)
            this.layer.triangle(-18,-75,18,-75,-10,-59)
            this.layer.triangle(-18,-75,-6,-75,-15,-65)
            this.layer.triangle(18,-75,6,-75,16,-68)
            this.layer.triangle(-18,-75,18,-75,-5,-56)
            this.layer.triangle(-18,-75,15,-75,3,-50)
            if(this.anim.sleeve>0){
                this.layer.fill(230,186,197,this.fade*this.anim.sleeve)
                this.layer.translate(-3,-51)
                this.layer.rotate(-atan2(-12,27))
                this.layer.quad(3,0,-3,0,-3,24,12,30)
                this.layer.rotate(atan2(-12,27))
                this.layer.translate(6,0)
                this.layer.rotate(-atan2(12,27))
                this.layer.quad(3,0,-3,0,-12,30,3,24)
                this.layer.rotate(atan2(12,27))
                this.layer.translate(-6,0)
                this.layer.fill(235,209,216,this.fade*this.anim.sleeve)
                this.layer.rotate(-atan2(-12,27))
                this.layer.quad(1,0,-1,0,-1,25,4,27)
                this.layer.rotate(atan2(-12,27))
                this.layer.translate(6,0)
                this.layer.rotate(-atan2(12,27))
                this.layer.quad(1,0,-1,0,-4,27,1,25)
                this.layer.rotate(atan2(12,27))
                this.layer.translate(-3,51)
            }
            this.layer.stroke(207,90,101,this.fade*this.anim.kimono)
            this.layer.strokeWeight(0.5)
            this.layer.line(-3,-59,1,-54)
            this.layer.line(3,-59,1,-54)
            this.layer.arc(0,-59,6,3,-180,0)
            this.layer.noStroke()
            this.layer.fill(254,238,223,this.fade)
            this.layer.ellipse(0,-46,12,30)
            this.layer.fill(250,188,173,this.fade)
            this.layer.ellipse(3,-42,0.5,2)
            this.layer.fill(242,205,219,this.fade)
            this.layer.arc(0,-37.5,11,13,0,180)
            this.layer.stroke(255,235,217,this.fade)
            this.layer.strokeWeight(4)
            this.layer.line(-3,-54,-12,-24)
            this.layer.line(3,-54,12,-24)
            this.layer.strokeWeight(0.8)
            this.layer.stroke(202,51,60,this.fade*this.anim.kimono)
            this.layer.fill(209,80,84,this.fade*this.anim.kimono)
            this.layer.strokeJoin(ROUND)
            this.layer.triangle(0,-44,-10,-50,-10,-38)
            this.layer.triangle(0,-44,10,-50,10,-38)
            this.layer.strokeJoin(MITER)
            this.layer.strokeWeight(1)
            this.layer.stroke(216,168,182,this.fade*this.anim.decoration)
            this.layer.fill(249,218,226,this.fade*this.anim.decoration)
            this.layer.beginShape()
            this.layer.vertex(-5,-55)
            this.layer.vertex(5,-55)
            this.layer.vertex(9,-26)
            this.layer.vertex(8,-25)
            this.layer.vertex(-8,-25)
            this.layer.vertex(-9,-26)
            this.layer.endShape()
            this.layer.noStroke()
            this.layer.beginShape()
            this.layer.vertex(-5,-55)
            this.layer.vertex(5,-55)
            for(let g=0;g<11;g++){
                this.layer.vertex(10-g*2,-26+(g%2)*3)
            }
            this.layer.endShape()
            this.layer.beginShape()
            this.layer.vertex(-5,-55)
            this.layer.vertex(5,-55)
            for(let g=0;g<11;g++){
                this.layer.vertex(10-g*2,-24-(g%2)*3)
            }
            this.layer.endShape()
            this.layer.fill(114,40,119,this.fade*this.anim.decoration)
            for(let g=0;g<5;g++){
                this.layer.ellipse(8-g*4,-25,0.25,1)
                this.layer.ellipse(8.5-g*4,-25,0.125,0.5)
                this.layer.ellipse(7.5-g*4,-25,0.125,0.5)
            }
            for(let g=0;g<4;g++){
                this.layer.ellipse(6-g*4,-25.5,0.125,0.5)
            }
            this.layer.noStroke()
            this.layer.fill(242,205,219,this.fade)
            this.layer.quad(-5.25,-54,5.25,-54,6,-47,-6,-47)
            this.layer.stroke(231,195,205,this.fade)
            this.layer.strokeWeight(0.5)
            this.layer.fill(245,224,231,this.fade)
            for(let g=0;g<5;g++){
                this.layer.ellipse(-4+g*2,-53,1.5,2)
            }
            for(let g=0;g<6;g++){
                this.layer.ellipse(-5+g*2,-48,1.5,2)
            }
            if(this.anim.sleeve>0){
                this.layer.noStroke()
                this.layer.fill(249,218,225,this.fade*this.anim.sleeve)
                this.layer.translate(-3,-51)
                this.layer.rotate(-atan2(-12,27))
                this.layer.quad(3,0,-3,0,-4,12,4,12)
                this.layer.rotate(atan2(-12,27))
                this.layer.translate(6,0)
                this.layer.rotate(-atan2(12,27))
                this.layer.quad(3,0,-3,0,-4,12,4,12)
                this.layer.rotate(atan2(12,27))
                this.layer.translate(-6,0)
                this.layer.fill(228,184,195,this.fade*this.anim.sleeve)
                this.layer.rotate(-atan2(-12,27))
                this.layer.quad(1,0,-1,0,-4/3,12,4/3,12)
                this.layer.rotate(atan2(-12,27))
                this.layer.translate(6,0)
                this.layer.rotate(-atan2(12,27))
                this.layer.quad(1,0,-1,0,-4/3,12,4/3,12)
                this.layer.rotate(atan2(12,27))
                this.layer.translate(-3,51)
            }
            this.layer.stroke(255,235,217,this.fade)
            this.layer.strokeWeight(4)
            this.layer.line(-3,-32,-8,0)
            this.layer.line(3,-32,8,0)
            if(this.anim.sandal>0){
                this.layer.translate(-7.9,-0.75)
                this.layer.rotate(-atan2(-3.95,30))
                this.layer.image(graphics.minor[1],-4*this.anim.sandal*this.fade,-4*this.anim.sandal*this.fade,8*this.anim.sandal*this.fade,8*this.anim.sandal*this.fade)
                this.layer.rotate(atan2(-3.95,30))
                this.layer.translate(15.8,0)
                this.layer.rotate(atan2(-3.95,30))
                this.layer.image(graphics.minor[1],-4*this.anim.sandal*this.fade,-4*this.anim.sandal*this.fade,8*this.anim.sandal*this.fade,8*this.anim.sandal*this.fade)
                this.layer.rotate(-atan2(-3.95,30))
                this.layer.translate(-7.9,0.75)
            }
            this.layer.stroke(231,195,205,this.fade)
            this.layer.strokeWeight(0.5)
            this.layer.fill(245,224,231,this.fade)
            for(let g=0;g<6;g++){
                this.layer.ellipse(-5+g*2,-36.5,1.5,2)
            }
            this.layer.noFill()
            this.layer.stroke(172,44,53,this.fade)
            this.layer.strokeWeight(0.5)
            this.layer.ellipse(-1,-53,4,2)
            this.layer.ellipse(3,-53,4,2)
            this.layer.line(1,-53,0,-50)
            this.layer.line(1,-53,2,-50)
            this.layer.stroke(207,90,101,this.fade*this.anim.decoration)
            this.layer.strokeWeight(0.5)
            this.layer.line(-3,-59,1,-54)
            this.layer.line(3,-59,1,-54)
            this.layer.noStroke()
            this.layer.fill(250,230,235,this.fade*this.anim.decoration)
            this.layer.beginShape()
            this.layer.vertex(-5,-55)
            this.layer.vertex(5,-55)
            for(let g=0;g<11;g++){
                this.layer.vertex(10.4-g*2,-26-g+(g%2)*3)
            }
            this.layer.endShape()
            this.layer.beginShape()
            this.layer.vertex(-5,-55)
            this.layer.vertex(5,-55)
            for(let g=0;g<11;g++){
                this.layer.vertex(10.4-g*2,-24-g-(g%2)*3)
            }
            this.layer.endShape()
            this.layer.fill(114,40,119,this.fade*this.anim.decoration)
            for(let g=0;g<5;g++){
                this.layer.ellipse(8.4-g*4,-26-g*2,0.25,1)
                this.layer.ellipse(8.9-g*4,-25.8-g*2,0.125,0.5)
                this.layer.ellipse(7.9-g*4,-26.2-g*2,0.125,0.5)
            }
            for(let g=0;g<4;g++){
                this.layer.ellipse(6.35-g*4,-27.5-g*2,0.125,0.5)
            }
            this.layer.fill(251,242,245,this.fade*this.anim.decoration)
            this.layer.beginShape()
            this.layer.vertex(5,-55)
            this.layer.vertex(-5,-55)
            for(let g=0;g<11;g++){
                this.layer.vertex(-10.4+g*2,-26-g+(g%2)*3)
            }
            this.layer.endShape()
            this.layer.beginShape()
            this.layer.vertex(5,-55)
            this.layer.vertex(-5,-55)
            for(let g=0;g<11;g++){
                this.layer.vertex(-10.4+g*2,-24-g-(g%2)*3)
            }
            this.layer.endShape()
            this.layer.fill(114,40,119,this.fade*this.anim.decoration)
            for(let g=0;g<5;g++){
                this.layer.ellipse(-8.4+g*4,-26-g*2,0.25,1)
                this.layer.ellipse(-8.9+g*4,-25.8-g*2,0.125,0.5)
                this.layer.ellipse(-7.9+g*4,-26.2-g*2,0.125,0.5)
            }
            for(let g=0;g<4;g++){
                this.layer.ellipse(-6.35+g*4,-27.5-g*2,0.125,0.5)
            }
            this.layer.fill(255,252,254,this.fade*this.anim.decoration)
            this.layer.beginShape()
            this.layer.vertex(-5,-55)
            this.layer.vertex(5,-55)
            for(let g=0;g<11;g++){
                this.layer.vertex(9-g*1.8,-36+(g%2)*3)
            }
            this.layer.endShape()
            this.layer.beginShape()
            this.layer.vertex(-5,-55)
            this.layer.vertex(5,-55)
            for(let g=0;g<11;g++){
                this.layer.vertex(9-g*1.8,-34-(g%2)*3)
            }
            this.layer.endShape()
            this.layer.noStroke()
            this.layer.fill(242,235,244,this.fade*this.anim.decoration)
            for(let g=0;g<10;g++){
                this.layer.triangle(9-g*1.8,-39,7.2-g*1.8,-39,8.1-g*1.8,-36)
            }
            this.layer.strokeJoin(ROUND)
            this.layer.strokeWeight(0.8)
            this.layer.stroke(202,51,60,this.fade*this.anim.kimono)
            this.layer.fill(209,80,84,this.fade*this.anim.kimono)
            this.layer.quad(1,-49,1,-45,5.5,-53,4.5,-56)
            this.layer.quad(1,-49,1,-45,-5.5,-53,-4.5,-56)
            this.layer.quad(-7.8,-46,7.8,-46,8.2,-44,-8.2,-44)
            this.layer.quad(-8.2,-44,8.2,-44,8.4,-42,-8.4,-42)
            this.layer.rect(5,-40.5,2,3)
            this.layer.noFill()
            this.layer.strokeJoin(MITER)
            this.layer.stroke(158,57,60,this.fade*this.anim.decoration)
            this.layer.strokeWeight(0.25)
            this.layer.ellipse(0,-53,2,1)
            this.layer.ellipse(2,-53,2,1)
            this.layer.line(1,-53,0.5,-51.5)
            this.layer.line(1,-53,1.5,-51.5)
            this.layer.noStroke()
            for(let g=1;g<6;g++){
                this.layer.fill(206+g*38/3,107+g*59/3,113+g*61/3,this.fade)
                this.layer.quad(13.5-(g%2)*2,-72+g*3,12-(g%2)*2,-66+g*3,10.5-(g%2)*2,-72+g*3,12-(g%2)*2,-78+g*3)
            }*/
            this.layer.fill(255,239,224,this.fade)
            this.layer.ellipse(0,-75,30,30)
            this.layer.stroke(/*201,108,113*/40,this.fade)
            this.layer.strokeWeight((4-this.anim.eye*3)*constrain(cos(this.spin.eye[0]+this.anim.direction)*5,0,1))
            this.layer.line(sin(this.spin.eye[0]+this.anim.direction)*15+cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72,sin(this.spin.eye[0]+this.anim.direction)*15-cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72-this.anim.eye*2)
            this.layer.line(sin(this.spin.eye[0]+this.anim.direction)*15+cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72,sin(this.spin.eye[0]+this.anim.direction)*15-cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72+this.anim.eye*2)
            this.layer.strokeWeight((4-this.anim.eye*3)*constrain(cos(this.spin.eye[1]+this.anim.direction)*5,0,1))
            this.layer.line(sin(this.spin.eye[1]+this.anim.direction)*15-cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72,sin(this.spin.eye[1]+this.anim.direction)*15+cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72-this.anim.eye*2)
            this.layer.line(sin(this.spin.eye[1]+this.anim.direction)*15-cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72,sin(this.spin.eye[1]+this.anim.direction)*15+cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72+this.anim.eye*2)
            this.layer.stroke(48,4,7,this.fade)
            this.layer.strokeWeight((3-this.anim.eye*2)*constrain(cos(this.spin.eye[0]+this.anim.direction)*5,0,1))
            this.layer.line(sin(this.spin.eye[0]+this.anim.direction)*(16+this.anim.eye)+cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72+0.2-this.anim.eye*0.2,sin(this.spin.eye[0]+this.anim.direction)*(16+this.anim.eye)-cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72-this.anim.eye*2+0.2-this.anim.eye*0.2)
            this.layer.line(sin(this.spin.eye[0]+this.anim.direction)*(16+this.anim.eye)+cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72+0.2-this.anim.eye*0.2,sin(this.spin.eye[0]+this.anim.direction)*(16+this.anim.eye)-cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72+this.anim.eye*2+0.2-this.anim.eye*0.2)
            this.layer.strokeWeight((3-this.anim.eye*2)*constrain(cos(this.spin.eye[1]+this.anim.direction)*5,0,1))
            this.layer.line(sin(this.spin.eye[1]+this.anim.direction)*(16-this.anim.eye)-cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72+0.2-this.anim.eye*0.2,sin(this.spin.eye[1]+this.anim.direction)*(16-this.anim.eye)+cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72-this.anim.eye*2+0.2-this.anim.eye*0.2)
            this.layer.line(sin(this.spin.eye[1]+this.anim.direction)*(16-this.anim.eye)-cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72+0.2-this.anim.eye*0.2,sin(this.spin.eye[1]+this.anim.direction)*(16-this.anim.eye)+cos(this.spin.eye[0]+this.anim.direction)*this.anim.eye*2,-72+this.anim.eye*2+0.2-this.anim.eye*0.2)
            this.layer.fill(/*250,211,216*/40,this.fade)
            this.layer.stroke(/*250,211,216*/40,this.fade)
            this.layer.strokeWeight(2)
            this.layer.strokeJoin(ROUND)
            this.layer.arc(0,-75,36,36,-180,0)
            for(let g=0,lg=this.hair.length;g<lg;g++){
                //this.layer.triangle(sin(this.hair[g].spin[0])*18,-75,sin(this.hair[g].spin[1])*18,-75,sin(this.hair[g].spin[2])*18,-75+this.hair[g].height)
            }
            //this.layer.triangle(18,-75,9,-75,18,-72)
            //this.layer.triangle(18,-75,15,-75,18,-69)
            //this.layer.triangle(-18,-75,9,-75,-18,-69)
            //this.layer.triangle(-18,-75,0,-75,-12,-63)
            //this.layer.triangle(-18,-75,6,-75,0,-69)
            this.layer.strokeJoin(MITER)
            this.layer.stroke(111,23,27,this.fade)
            this.layer.strokeWeight(0.5)
            //this.layer.line(13,-58.5,9,-58.5)
            //this.layer.image(graphics.minor[2],-5-15*this.fade,-77.5-22.5*this.fade,30*this.fade,45*this.fade)
            if(this.kimono>0){
                //this.layer.image(graphics.minor[3],-3-15*this.anim.kimono*this.fade,-44-15*this.anim.kimono*this.fade,30*this.anim.kimono*this.fade,30*this.anim.kimono*this.fade)
            }
            this.layer.translate(0,1.25)
            this.layer.scale(1/this.size)
            this.layer.translate(-this.position.x,-this.position.y-45)
        }
    }
    update(){
        super.update()
        if(inputs.keys[0][0]||inputs.keys[1][0]){
            this.velocity.x-=this.movement.speed
        }
        if(inputs.keys[0][1]||inputs.keys[1][1]){
            this.velocity.x+=this.movement.speed
        }
        this.anim.direction+=3
        //this.anim.directionPosition=constrain(this.anim.directionPosition+this.velocity.x/30,-1,1)
        this.anim.eye=sin(this.time*10)*0.5+0.5
        if((inputs.keys[0][2]||inputs.keys[1][2])&&this.timers[0]>0){
            this.timers[0]=0
            this.velocity.y=-this.movement.jump
            this.timers[1]=1
        }
        stage.focus.x=this.position.x
        stage.focus.y=this.position.y
    }
}